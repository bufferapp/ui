{"version":3,"file":"SimpleModal.js","sourceRoot":"","sources":["../../../../src/components/SimpleModal/SimpleModal.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,OAAO,CAAA;AAChD,OAAO,SAAS,MAAM,YAAY,CAAA;AAClC,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAA;AAC/B,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;AAClD,OAAO,EAAE,aAAa,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAA;AAEnE,MAAM,UAAU,GAAG,EAAE,CAAA;AACrB,MAAM,OAAO,GAAG,CAAC,CAAA;AAEjB,MAAM,WAAW,GAAG,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE,EAAE,EAAE;IAChD,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;IAC7B,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;IACjC,MAAM,EACJ,gBAAgB,EAChB,OAAO,EAAE,uBAAuB,EAChC,cAAc,GACf,GAAG,YAAY,CAAC;QACf,gBAAgB,EAAE,aAAa;QAC/B,iBAAiB,EAAE,cAAc;QACjC,QAAQ,EAAE,GAAG;QACb,SAAS,EAAE,WAAW;KACvB,CAAC,CAAA;IAGF,MAAM,YAAY,GAAG,CAAC,CAAC,EAAE,EAAE;QAEzB,MAAM,sBAAsB,GAAG,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAC9D,uHAAuH,CACxH,CAAA;QACD,MAAM,YAAY,GAAG,sBAAsB,CAAC,CAAC,CAAC,CAAA;QAC9C,MAAM,WAAW,GACf,sBAAsB,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;QAE3D,IAAI,CAAC,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,aAAa,KAAK,WAAW,EAAE;YACzD,YAAY,CAAC,KAAK,EAAE,CAAA;YACpB,OAAO,CAAC,CAAC,cAAc,EAAE,CAAA;SAC1B;QAED,IAAI,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,aAAa,KAAK,YAAY,EAAE;YACzD,WAAW,CAAC,KAAK,EAAE,CAAA;YACnB,CAAC,CAAC,cAAc,EAAE,CAAA;SACnB;IACH,CAAC,CAAA;IAED,MAAM,eAAe,GAAG,IAAI,GAAG,CAAC;QAC9B,CAAC,UAAU,EAAE,uBAAuB,CAAC;QACrC,CAAC,OAAO,EAAE,YAAY,CAAC;KACxB,CAAC,CAAA;IAGF,MAAM,YAAY,GAAG,CAAC,CAAC,EAAE,EAAE;QACzB,IAAI,CAAC,CAAC,MAAM,KAAK,YAAY,CAAC,OAAO;YAAE,OAAM;QAC7C,uBAAuB,EAAE,CAAA;IAC3B,CAAC,CAAA;IAED,SAAS,CAAC,GAAG,EAAE;QAEb,SAAS,WAAW,CAAC,CAAC;YACpB,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;YAC/C,OAAO,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAA;QAChC,CAAC;QACD,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAA;QAEjD,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,CAAA;QAExB,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAA;QAEtE,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAA;IACnE,CAAC,EAAE,EAAE,CAAC,CAAA;IAEN,OAAO,CACL,oBAAC,SAAS,IAAC,GAAG,EAAE,YAAY,EAAE,IAAI,EAAC,QAAQ,gBAAY,MAAM;QAC3D,oBAAC,gBAAgB,oBAAK,cAAc;YAClC,oBAAC,KAAK,IACJ,GAAG,EAAE,QAAQ,EACb,QAAQ,EAAC,GAAG;gBAEZ,oBAAC,WAAW,IAAC,OAAO,EAAE,GAAG,EAAE,CAAC,uBAAuB,EAAE;oBACnD,oBAAC,KAAK,OAAG,CACG;gBACb,QAAQ,CACH,CACS,CACT,CACb,CAAA;AACH,CAAC,CAAA;AAED,WAAW,CAAC,SAAS,GAAG;IACtB,QAAQ,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU;IACnC,WAAW,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU;CACvC,CAAA;AAED,eAAe,WAAW,CAAA","sourcesContent":["import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { Cross } from '../Icon'\nimport { Container, Modal, CloseButton } from './style'\nimport { useAnimation } from '../AnimationWrapper'\nimport { stageInCenter, stageOutCenter } from '../style/animations'\n\nconst ESCAPE_KEY = 27\nconst TAB_KEY = 9\n// @ts-expect-error TS(7031) FIXME: Binding element 'children' implicitly has an 'any'... Remove this comment to see the full error message\nconst SimpleModal = ({ children, closeAction }) => {\n  const modalRef = useRef(null)\n  const containerRef = useRef(null)\n  const {\n    AnimationWrapper,\n    dismiss: dismissAnimationWrapper,\n    animationProps,\n  } = useAnimation({\n    stageInAnimation: stageInCenter,\n    stageOutAnimation: stageOutCenter,\n    duration: 400,\n    onDismiss: closeAction,\n  })\n\n  // @ts-expect-error TS(7006) FIXME: Parameter 'e' implicitly has an 'any' type.\n  const handleTabKey = (e) => {\n    // @ts-expect-error TS(2531) FIXME: Object is possibly 'null'.\n    const focusableModalElements = modalRef.current.querySelectorAll(\n      'a[href], button, textarea, input[type=\"text\"], input[type=\"radio\"], input[type=\"checkbox\"], select, div[tabIndex=\"0\"]',\n    )\n    const firstElement = focusableModalElements[0]\n    const lastElement =\n      focusableModalElements[focusableModalElements.length - 1]\n\n    if (!e.shiftKey && document.activeElement === lastElement) {\n      firstElement.focus()\n      return e.preventDefault()\n    }\n\n    if (e.shiftKey && document.activeElement === firstElement) {\n      lastElement.focus()\n      e.preventDefault()\n    }\n  }\n\n  const keyListenersMap = new Map([\n    [ESCAPE_KEY, dismissAnimationWrapper],\n    [TAB_KEY, handleTabKey],\n  ])\n\n  // @ts-expect-error TS(7006) FIXME: Parameter 'e' implicitly has an 'any' type.\n  const clickToClose = (e) => {\n    if (e.target !== containerRef.current) return\n    dismissAnimationWrapper()\n  }\n\n  useEffect(() => {\n    // @ts-expect-error TS(7006) FIXME: Parameter 'e' implicitly has an 'any' type.\n    function keyListener(e) {\n      const listener = keyListenersMap.get(e.keyCode)\n      return listener && listener(e)\n    }\n    document.addEventListener('keydown', keyListener)\n    // @ts-expect-error TS(2531) FIXME: Object is possibly 'null'.\n    modalRef.current.focus()\n    // @ts-expect-error TS(2531) FIXME: Object is possibly 'null'.\n    containerRef.current.addEventListener('click', (e) => clickToClose(e))\n\n    return () => document.removeEventListener('keydown', keyListener)\n  }, [])\n\n  return (\n    <Container ref={containerRef} role=\"dialog\" aria-modal=\"true\">\n      <AnimationWrapper {...animationProps}>\n        <Modal\n          ref={modalRef}\n          tabIndex=\"0\" // this needs to have a tabIndex so that it can listen for the ESC key\n        >\n          <CloseButton onClick={() => dismissAnimationWrapper()}>\n            <Cross />\n          </CloseButton>\n          {children}\n        </Modal>\n      </AnimationWrapper>\n    </Container>\n  )\n}\n\nSimpleModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  closeAction: PropTypes.func.isRequired,\n}\n\nexport default SimpleModal\n"]}