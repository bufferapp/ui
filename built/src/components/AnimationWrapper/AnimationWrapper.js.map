{"version":3,"file":"AnimationWrapper.js","sourceRoot":"","sources":["../../../../src/components/AnimationWrapper/AnimationWrapper.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { easeOutQuart } from '../style/animations'\n\nconst AnimationContainer = styled.div`\n  animation-fill-mode: forwards;\n  display: flex;\n  align-items: ${({ align }) => align}}\n  justify-content: ${({ justify }) => justify}}\n  outline: none;\n  width: 100%;\n\n  &.stageIn {\n    animation: ${({ duration }) => `${duration}ms`} ${({ stageInAnimation }) =>\n  stageInAnimation} ${({ easing }) => easing};\n  }\n\n  &.stageOut {\n    animation: ${({ duration }) => `${duration}ms`} ${({ stageOutAnimation }) =>\n  stageOutAnimation} ${({ easing }) => easing};\n  }\n\n  @media (prefers-reduced-motion) {\n    &.stageIn,\n    &.stageOut {\n      animation-name: dissolve;\n    }\n  }\n`\n\nconst AnimationWrapper = ({\n  // @ts-expect-error TS(7031) FIXME: Binding element 'align' implicitly has an 'any' ty... Remove this comment to see the full error message\n  align,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'children' implicitly has an 'any'... Remove this comment to see the full error message\n  children,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'dismissing' implicitly has an 'an... Remove this comment to see the full error message\n  dismissing,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'duration' implicitly has an 'any'... Remove this comment to see the full error message\n  duration,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'easing' implicitly has an 'any' t... Remove this comment to see the full error message\n  easing,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'justify' implicitly has an 'any' ... Remove this comment to see the full error message\n  justify,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'stageInAnimation' implicitly has ... Remove this comment to see the full error message\n  stageInAnimation,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'stageOutAnimation' implicitly has... Remove this comment to see the full error message\n  stageOutAnimation,\n  // @ts-expect-error TS(7031) FIXME: Binding element 'onDismiss' implicitly has an 'any... Remove this comment to see the full error message\n  onDismiss,\n}) => {\n  const [content, setContent] = useState(children)\n  const [hasChanged, setHasChanged] = useState(false)\n  const [dismissed, setDismissed] = useState(false)\n  const [animationLocked, setAnimationLocked] = useState(false)\n  const [className, setClassName] = useState('stageIn')\n  const shouldUpdate = children !== content && !dismissing\n\n  function lockAnimationDuringStaging() {\n    setAnimationLocked(true)\n    setTimeout(() => {\n      setAnimationLocked(false)\n    }, duration * 2)\n  }\n\n  function stageIn() {\n    setClassName('stageIn')\n  }\n\n  function stageOut() {\n    setClassName('stageOut')\n  }\n\n  useEffect(() => {\n    if (shouldUpdate) {\n      setHasChanged(true)\n      setTimeout(() => {\n        stageIn()\n        setContent(children)\n        setHasChanged(false)\n      }, duration)\n    }\n  }, [children])\n\n  useEffect(() => {\n    if (dismissing) {\n      // we are dismissing a bit earlier then animation end to prevent accidental re-render\n      setTimeout(() => {\n        setDismissed(true)\n        onDismiss()\n      }, duration - 10)\n    }\n  }, [dismissing])\n\n  useEffect(() => {\n    lockAnimationDuringStaging()\n  }, [])\n\n  if (!animationLocked && (hasChanged || dismissing)) {\n    stageOut()\n    lockAnimationDuringStaging()\n  }\n\n  return (\n    <AnimationContainer\n      align={align}\n      duration={duration}\n      easing={easing}\n      justify={justify}\n      stageInAnimation={stageInAnimation}\n      stageOutAnimation={stageOutAnimation}\n      className={className}\n    >\n      {!dismissed && content}\n    </AnimationContainer>\n  )\n}\n\nAnimationWrapper.propTypes = {\n  align: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  dismissing: PropTypes.bool,\n  duration: PropTypes.number,\n  justify: PropTypes.string,\n  easing: PropTypes.string,\n  stageInAnimation: PropTypes.shape({}).isRequired,\n  stageOutAnimation: PropTypes.shape({}).isRequired,\n  onDismiss: PropTypes.func,\n}\n\nAnimationWrapper.defaultProps = {\n  align: 'center',\n  dismissing: false,\n  duration: 300,\n  justify: 'center',\n  easing: easeOutQuart,\n  onDismiss: () => {},\n}\n\nexport default AnimationWrapper\n"]}